import{_ as Q}from"./Toggle.DOwauvkz.js";import{al as X,am as Y,z as x,an as Z,n as j,o as c,c as p,b as o,q as l,s as b,aj as U,a as t,w,d as O,ao as H,ab as T,ap as z,F as N,a3 as B,a0 as P,aa as W,i as ee,t as le,ac as oe}from"./entry.Bg0Ots8a.js";import{_ as L}from"./Input.BT2LL2SN.js";import{_ as te}from"./FormGroup.DiJa-5EB.js";import{_ as ne}from"./Dropdown.DYF_gG7X.js";import{_ as G}from"./UInputOptions.BtJna1-r.js";const se={key:0,class:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg"},ae={key:0,class:"flex gap-4"},ue=t("p",null,"Every : ",-1),de=t("p",null," Seconde(s)",-1),ie={key:1,class:"flex gap-4"},ce=t("p",null,"Every : ",-1),re=t("p",null," Minute(s)",-1),pe={key:2,class:"flex gap-4"},me=t("p",null,"Every : ",-1),_e=t("p",null," Hour(s) At :",-1),ve=t("p",null,"Minute(s)",-1),Ve={key:3,class:"flex gap-4"},be=t("p",null,"Every : ",-1),fe=t("p",null," Day(s) At : ",-1),he={key:4,class:"flex gap-4"},ke=t("p",null,"Every : ",-1),ye=t("p",null," At ",-1),Ue={key:5,class:""},xe={class:"flex my-4 gap-4"},we=t("p",null,"On the :",-1),$e=t("p",null," day, of every :",-1),ge=t("p",null,"Month",-1),Ce={class:"flex gap-4"},Ie=t("p",null,"At :",-1),je={__name:"UCronDatePicker",props:{modelValue:{},modelModifiers:{}},emits:X(["newValue"],["update:modelValue"]),setup(E,{emit:d}){const V=Y(E,"modelValue"),r=d,R=()=>{r("newValue",$.value),V.value=!1},$=x(()=>{switch(s.value){case"secondes":return`${A.value}`;case"minutes":return` ${D.value}`;case"hours":return` ${a.value}`;case"days":return`${_.value}`;case"weeks":return`${e.value}`;case"months":return`${k.value}`;default:return"*/1 * * * *"}}),M=x(()=>Z.toString($.value)),m=j(1),f=j(1),g=j(1),h=j(1),C=j(1),S=j([1,2,3,4,5,6,7]),v=j("00:00"),A=x(()=>s.value==="secondes"?"*/"+m.value+" * * * * *":"*/1 * * * * *"),D=x(()=>s.value==="minutes"?"0 */"+f.value+" * * * *":"*/1 * * * * *"),a=x(()=>s.value==="hours"?"0 "+f.value+" */"+g.value+" * * *":"*/1 * * * * *"),_=x(()=>{if(s.value==="days"){const y=v.value.split(":"),n=parseInt(y[0]);return"0 "+parseInt(y[1])+" "+n+" */"+h.value+" * *"}else return"*/1 * * * * *"}),e=x(()=>{if(s.value==="weeks"){const y=v.value.split(":"),n=parseInt(y[0]);return"0 "+parseInt(y[1])+" "+n+" * * "+S.value.join(",")}else return"*/1 * * * * *"}),k=x(()=>{if(s.value==="months"){const y=v.value.split(":"),n=parseInt(y[0]);return"0 "+parseInt(y[1])+" "+n+" "+h.value+" */"+C.value+" *"}else return"*/1 * * * * *"}),s=j("secondes"),F=[{label:"Secondes",value:"secondes"},{label:"Minutes",value:"minutes"},{label:"Hours",value:"hours"},{label:"Days",value:"days"},{label:"Weeks",value:"weeks"},{label:"Months",value:"months"}],q=[{label:"Lundi",value:1},{label:"Mardi",value:2},{label:"Mercredi",value:3},{label:"Jeudi",value:4},{label:"Vendredi",value:5},{label:"Samedi",value:6},{label:"Dimanche",value:7}];return(y,n)=>{const u=L,I=H,K=T;return V.value?(c(),p("div",se,[o(u,{class:"mb-4",value:l(M),disabled:""},null,8,["value"]),o(I,{class:"w-28 mb-4",modelValue:l(s),"onUpdate:modelValue":n[0]||(n[0]=i=>b(s)?s.value=i:null),options:F,"option-attribute":"label","value-attribute":"value"},null,8,["modelValue"]),l(s)==="secondes"?(c(),p("div",ae,[ue,o(u,{class:"w-16",type:"number",modelValue:l(m),"onUpdate:modelValue":n[1]||(n[1]=i=>b(m)?m.value=i:null)},null,8,["modelValue"]),de])):U("",!0),l(s)==="minutes"?(c(),p("div",ie,[ce,o(u,{class:"w-16",type:"number",modelValue:l(f),"onUpdate:modelValue":n[2]||(n[2]=i=>b(f)?f.value=i:null)},null,8,["modelValue"]),re])):U("",!0),l(s)==="hours"?(c(),p("div",pe,[me,o(u,{class:"w-16",type:"number",modelValue:l(g),"onUpdate:modelValue":n[3]||(n[3]=i=>b(g)?g.value=i:null)},null,8,["modelValue"]),_e,o(u,{class:"w-16",type:"number",modelValue:l(f),"onUpdate:modelValue":n[4]||(n[4]=i=>b(f)?f.value=i:null)},null,8,["modelValue"]),ve])):U("",!0),l(s)==="days"?(c(),p("div",Ve,[be,o(u,{class:"w-16",type:"number",modelValue:l(h),"onUpdate:modelValue":n[5]||(n[5]=i=>b(h)?h.value=i:null)},null,8,["modelValue"]),fe,o(u,{class:"w-24",type:"time",modelValue:l(v),"onUpdate:modelValue":n[6]||(n[6]=i=>b(v)?v.value=i:null)},null,8,["modelValue"])])):U("",!0),l(s)==="weeks"?(c(),p("div",he,[ke,o(I,{class:"w-28",modelValue:l(S),"onUpdate:modelValue":n[7]||(n[7]=i=>b(S)?S.value=i:null),options:q,"option-attribute":"label","value-attribute":"value",multiple:""},null,8,["modelValue"]),ye,o(u,{class:"w-24",type:"time",modelValue:l(v),"onUpdate:modelValue":n[8]||(n[8]=i=>b(v)?v.value=i:null)},null,8,["modelValue"])])):U("",!0),l(s)==="months"?(c(),p("div",Ue,[t("div",xe,[we,o(u,{class:"w-16",type:"number",modelValue:l(h),"onUpdate:modelValue":n[9]||(n[9]=i=>b(h)?h.value=i:null)},null,8,["modelValue"]),$e,o(u,{class:"w-16",type:"number",modelValue:l(C),"onUpdate:modelValue":n[10]||(n[10]=i=>b(C)?C.value=i:null)},null,8,["modelValue"]),ge]),t("div",Ce,[Ie,o(u,{class:"w-24",type:"time",modelValue:l(v),"onUpdate:modelValue":n[11]||(n[11]=i=>b(v)?v.value=i:null)},null,8,["modelValue"])])])):U("",!0),o(K,{onClick:n[12]||(n[12]=i=>R()),icon:"i-heroicons-pencil-square",variant:"outline",class:"mt-4",block:""},{default:w(()=>[O("Edit")]),_:1})])):U("",!0)}}},Me={class:"flex gap-4"},Se={class:"flex min-h-24 my-4"},Ae={class:"my-auto"},De={class:"ml-6"},Oe={class:"flex gap-3 my-2"},J={__name:"ruleEditor",props:["object"],emits:["deleteCondi"],setup(E,{emit:d}){const V=z(),r=E,R=d,$=x(()=>r.object[1].filter(_=>_[0]=="and"||_[0]=="or")),M=x(()=>r.object[1].filter(_=>Array.isArray(_)&&_[0]!="and"&&_[0]!="or")),m=x(()=>r.object[1].length>1?r.object[0]:"+"),f=()=>{console.log(""),r.object[1].push(["and",[]])},g=()=>{r.object[1].push(["==","",""])},h=_=>{const e=r.object[1].findIndex(k=>k===_);r.object[1].splice(e,1)},C=()=>{R("deleteCondi",r.object)},S=_=>{const e=r.object[1].findIndex(k=>k===_);r.object[1].splice(e,1)},v=()=>{r.object[0]=="and"?r.object[0]="or":r.object[0]="and"},A=[{label:">",value:">"},{label:"<",value:"<"},{label:"≥",value:">="},{label:"≤",value:">="},{label:"=",value:"=="}],D=[{label:"=",value:"=="}],a=[[{label:"Switch Or || And",icon:"i-heroicons-arrows-right-left",click:()=>{v()}}],[{label:"Add rule",icon:"i-heroicons-plus",click:()=>{g()}},{label:"Add condition",icon:"i-heroicons-plus",click:()=>{f()}}],[{label:"Supprimer",icon:"i-heroicons-archive-box-x-mark",click:()=>{C()}}]];return(_,e)=>{const k=T,s=ne,F=W,q=J,y=G,n=H;return c(),p("div",Me,[t("div",Se,[o(F,{orientation:"vertical",class:""},{default:w(()=>[o(s,{items:a},{default:w(()=>[o(k,{class:"capitalize w-12",variant:"outline",label:l(m),block:""},null,8,["label"])]),_:1})]),_:1})]),t("div",Ae,[(c(!0),p(N,null,B(l($),u=>(c(),P(q,{object:u,onDeleteCondi:S},null,8,["object"]))),256)),(c(!0),p(N,null,B(l(M),u=>(c(),p("div",De,[t("div",Oe,[o(y,{options:l(V).inputs,modelValue:u[1],"onUpdate:modelValue":I=>u[1]=I},null,8,["options","modelValue","onUpdate:modelValue"]),o(n,{modelValue:u[0],"onUpdate:modelValue":I=>u[0]=I,options:l(V).inputsIsBoulean(u[1])?D:A,"option-attribute":"label","value-attribute":"value"},null,8,["modelValue","onUpdate:modelValue","options"]),o(y,{options:l(V).inputsIsBoulean(u[1])?[]:l(V).inputs,modelValue:u[2],"onUpdate:modelValue":I=>u[2]=I},null,8,["options","modelValue","onUpdate:modelValue"]),o(k,{square:"",color:"red",variant:"outline",icon:"i-heroicons-x-mark",onClick:I=>h(u)},null,8,["onClick"])])]))),256))])])}}},Pe={class:"p-4 h-full overflow-y-auto overflow-x-hidden"},Ne={class:"my-4"},Be={class:"flex flex-col max-w-full bg-gray-200 dark:bg-gray-900 p-4 rounded-md my-2"},Ee={class:"flex gap-4"},Re={class:"m-auto text-xl font-bold grow"},Fe={class:"flex flex-col gap-4 p-4"},qe={class:"flex flex-col gap-2 mt-4"},He={class:"flex"},Te=t("p",{class:"grow"},"State of program after restart :",-1),ze={class:"flex"},We=t("p",{class:"grow"},"Reactivate ON :",-1),Le={class:"flex"},Ge=t("p",{class:"grow"},"Reactive OFF :",-1),Je={key:0},Ke={class:"overflow-x-auto"},Qe={class:"grid-cols-1 md:grid grid-cols-2 gap-4 py-4"},Xe={class:"flex flex-col gap-2"},Ye=t("p",{class:"font-bold text-lg"},"If true :",-1),Ze={class:"flex gap-4"},el={class:"flex flex-col gap-2"},ll=t("p",{class:"font-bold text-lg"},"If false :",-1),ol={class:"flex gap-4"},il={__name:"program",setup(E){const d=z(),V=j(!1);ee(()=>{d.callPrograms()});const r=[{label:"ON",value:!0},{label:"OFF",value:!1}];return(R,$)=>{const M=Q,m=T,f=L,g=te,h=je,C=W,S=oe,v=J,A=H,D=G;return c(),p("div",Pe,[t("div",Ne,[(c(!0),p(N,null,B(l(d).programs,(a,_)=>(c(),p("div",Be,[t("div",Ee,[t("p",Re,le(a.name),1),o(M,{modelValue:a.running,"onUpdate:modelValue":e=>a.running=e,size:"xl",class:"m-auto",onClick:e=>l(d).switchProgram(a)},null,8,["modelValue","onUpdate:modelValue","onClick"]),o(m,{square:"",onClick:e=>a.openModal=!0,color:"gray",icon:"i-heroicons-ellipsis-horizontal-solid"},null,8,["onClick"]),o(m,{square:"",variant:"ghost",icon:l(d).indexOpen==_?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:e=>l(d).selectOpen(_)},null,8,["icon","onClick"])]),o(S,{modelValue:a.openModal,"onUpdate:modelValue":e=>a.openModal=e},{default:w(()=>[o(m,{class:"w-24 ml-4 mt-4",onClick:e=>l(d).deleteProgram(a),color:"red",variant:"outline",icon:"i-heroicons-trash"},{default:w(()=>[O("Delete")]),_:2},1032,["onClick"]),t("div",Fe,[o(g,{label:"Name"},{default:w(()=>[o(f,{modelValue:a.name,"onUpdate:modelValue":e=>a.name=e},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(g,{label:"Time running",class:"grow"},{default:w(()=>[o(m,{class:"w-full border",color:"gray",icon:l(V)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:$[0]||($[0]=e=>V.value=!l(V)),label:l(d).labelCronInterval(a.cronInterval),variant:"ghost"},null,8,["icon","label"]),o(h,{class:"mt-4",modelValue:l(V),"onUpdate:modelValue":$[1]||($[1]=e=>b(V)?V.value=e:null),onNewValue:e=>{a.cronInterval=e}},null,8,["modelValue","onNewValue"])]),_:2},1024),t("div",qe,[t("div",He,[Te,o(M,{class:"m-auto",modelValue:a.stateRestart,"onUpdate:modelValue":e=>a.stateRestart=e},null,8,["modelValue","onUpdate:modelValue"])]),o(C),t("div",ze,[We,o(M,{class:"m-auto",modelValue:a.runIfPreviousStateAlreadyTrue,"onUpdate:modelValue":e=>a.runIfPreviousStateAlreadyTrue=e},null,8,["modelValue","onUpdate:modelValue"])]),o(C),t("div",Le,[Ge,o(M,{class:"m-auto",modelValue:a.runIfPreviousStateAlreadyFalse,"onUpdate:modelValue":e=>a.runIfPreviousStateAlreadyFalse=e},null,8,["modelValue","onUpdate:modelValue"])])]),o(m,{onClick:e=>l(d).setPrograms(a),icon:"i-heroicons-save",block:""},{default:w(()=>[O("Save")]),_:2},1032,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(d).indexOpen==_?(c(),p("div",Je,[t("div",Ke,[o(v,{class:"py-4",object:a.rules},null,8,["object"])]),t("div",Qe,[t("div",Xe,[Ye,(c(!0),p(N,null,B(a.actions.true,(e,k)=>(c(),p("div",Ze,[o(A,{class:"w-32",modelValue:e.output,"onUpdate:modelValue":s=>e.output=s,options:l(d).outputs,"option-attribute":"label","value-attribute":"value"},null,8,["modelValue","onUpdate:modelValue","options"]),l(d).inputsIsRelay(e.output)?(c(),P(A,{key:0,class:"w-20",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,options:r,"option-attribute":"label","value-attribute":"value"},null,8,["modelValue","onUpdate:modelValue"])):U("",!0),l(d).inputsIsRelay(e.output)?U("",!0):(c(),P(D,{key:1,class:"w-28",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,options:[]},null,8,["modelValue","onUpdate:modelValue"])),o(m,{square:"",color:"red",variant:"outline",icon:"i-heroicons-x-mark",onClick:s=>l(d).deleteAction(a,!0,k)},null,8,["onClick"])]))),256)),o(m,{onClick:e=>l(d).addAction(a,!0),class:"w-28 mb-8",variant:"outline",icon:"i-heroicons-plus",block:""},{default:w(()=>[O("Ajouter")]),_:2},1032,["onClick"])]),t("div",el,[ll,(c(!0),p(N,null,B(a.actions.false,(e,k)=>(c(),p("div",ol,[o(A,{class:"w-32",modelValue:e.output,"onUpdate:modelValue":s=>e.output=s,options:l(d).outputs,"option-attribute":"label","value-attribute":"value"},null,8,["modelValue","onUpdate:modelValue","options"]),l(d).inputsIsRelay(e.output)?(c(),P(A,{key:0,class:"w-20",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,options:r,"option-attribute":"label","value-attribute":"value"},null,8,["modelValue","onUpdate:modelValue"])):U("",!0),l(d).inputsIsRelay(e.output)?U("",!0):(c(),P(D,{key:1,class:"w-28",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,options:[]},null,8,["modelValue","onUpdate:modelValue"])),o(m,{square:"",color:"red",variant:"outline",icon:"i-heroicons-x-mark",onClick:s=>l(d).deleteAction(a,!1,k)},null,8,["onClick"])]))),256)),o(m,{onClick:e=>l(d).addAction(a,!1),class:"w-28",variant:"outline",icon:"i-heroicons-plus",block:""},{default:w(()=>[O("Ajouter")]),_:2},1032,["onClick"])])]),o(m,{class:"mt-12",block:"",variant:"ghost",onClick:e=>l(d).setPrograms(a),icon:"i-heroicons-cloud-arrow-up"},{default:w(()=>[O("Save changes")]),_:2},1032,["onClick"])])):U("",!0)]))),256))])])}}};export{il as default};
